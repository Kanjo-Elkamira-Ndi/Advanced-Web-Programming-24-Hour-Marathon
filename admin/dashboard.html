<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin Panel - BookSwap</title>
  <link rel="stylesheet" href="../assets/css/admin_styles.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="admin-container">
    <!-- Sidebar -->
    <aside class="admin-sidebar">
      <div class="admin-logo">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>
        </svg>
        <h1>BookSwap</h1>
      </div>
      
      <nav class="admin-nav">
        <a href="#" class="admin-nav-item active">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>
          </svg>
          <span>Books</span>
        </a>
        <a href="index.html" class="admin-nav-item">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
            <polyline points="9 22 9 12 15 12 15 22"/>
          </svg>
          <span>View Site</span>
        </a>
        <button class="btn btn-primary" onclick="openAddModal()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>
            </svg>
        <span>Add New Book</span>
        </button>
        </a>
      </nav>
      
      <div class="admin-user">
        <div class="admin-user-avatar">A</div>
        <div class="admin-user-info">
          <div class="admin-user-name">Admin User</div>
          <div class="admin-user-role">Administrator</div>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="admin-main">
      <header class="admin-header">
        <h2>Book Management</h2>
        <div class="admin-header-actions">
          <button class="btn btn-primary" onclick="openAddModal()">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 5v14M5 12h14"/>
            </svg>
            Add New Book
          </button>
        </div>
      </header>

      <!-- Stats -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Total Books</span>
            <div class="stat-card-icon primary">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20"/>
              </svg>
            </div>
          </div>
          <div class="stat-card-value" id="total-books">0</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Like New</span>
            <div class="stat-card-icon success">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22 4 12 14.01 9 11.01"/>
              </svg>
            </div>
          </div>
          <div class="stat-card-value" id="like-new-count">0</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Good Condition</span>
            <div class="stat-card-icon info">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"/>
              </svg>
            </div>
          </div>
          <div class="stat-card-value" id="good-count">0</div>
        </div>
        
        <div class="stat-card">
          <div class="stat-card-header">
            <span class="stat-card-title">Fair Condition</span>
            <div class="stat-card-icon warning">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
              </svg>
            </div>
          </div>
          <div class="stat-card-value" id="fair-count">0</div>
        </div>
      </div>

      <!-- Books Table -->
      <div class="table-container">
        <div class="table-header">
          <h3 class="table-title">All Books</h3>
          <div class="table-search">
            <input type="text" id="search-input" placeholder="Search books..." oninput="filterBooks()">
          </div>
        </div>
        
        <table class="data-table">
          <thead>
            <tr>
              <th>Book</th>
              <th>Genre</th>
              <th>Condition</th>
              <th>Owner</th>
              <th>Location</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="books-table-body">
            <!-- Books will be inserted here dynamically -->
          </tbody>
        </table>
      </div>
    </main>
  </div>

  <!-- Add/Edit Modal -->
  <div class="modal-overlay" id="book-modal">
    <div class="modal">
      <div class="modal-header">
        <h3 id="modal-title">Add New Book</h3>
        <button class="modal-close" onclick="closeModal()">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <line x1="18" y1="6" x2="6" y2="18"/>
            <line x1="6" y1="6" x2="18" y2="18"/>
          </svg>
        </button>
      </div>
      <form id="book-form" onsubmit="handleSubmit(event)">
        <div class="modal-body">
          <input type="hidden" id="book-id">
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="book-title">Title *</label>
              <input type="text" class="form-input" id="book-title" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="book-author">Author *</label>
              <input type="text" class="form-input" id="book-author" required>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="book-genre">Genre *</label>
              <select class="form-select" id="book-genre" required>
                <option value="">Select genre</option>
                <option value="Literary Fiction">Literary Fiction</option>
                <option value="Historical Fiction">Historical Fiction</option>
                <option value="Mystery">Mystery</option>
                <option value="Self-Help">Self-Help</option>
                <option value="Romance">Romance</option>
                <option value="Science Fiction">Science Fiction</option>
                <option value="Fantasy">Fantasy</option>
                <option value="Biography">Biography</option>
                <option value="Non-Fiction">Non-Fiction</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="book-condition">Condition *</label>
              <select class="form-select" id="book-condition" required>
                <option value="">Select condition</option>
                <option value="Like New">Like New</option>
                <option value="Good">Good</option>
                <option value="Fair">Fair</option>
              </select>
            </div>
          </div>
          
          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="book-owner">Owner Name *</label>
              <input type="text" class="form-input" id="book-owner" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="book-location">Location *</label>
              <input type="text" class="form-input" id="book-location" placeholder="City, State" required>
            </div>
          </div>
          
          <div class="form-group">
            <label class="form-label" for="book-cover">Cover Image URL</label>
            <input type="url" class="form-input" id="book-cover" placeholder="https://example.com/image.jpg">
          </div>
          
          <div class="form-group">
            <label class="form-label" for="book-description">Description *</label>
            <textarea class="form-textarea" id="book-description" required placeholder="Describe the book and its condition..."></textarea>
          </div>
          
          <div class="form-group">
            <label class="form-label">
              <input type="checkbox" id="book-featured"> Featured book
            </label>
          </div>
        </div>
        
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
          <button type="submit" class="btn btn-primary" id="submit-btn">Add Book</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Delete Confirmation Modal -->
  <div class="modal-overlay confirm-modal" id="delete-modal">
    <div class="modal">
      <div class="modal-body">
        <div class="confirm-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M3 6h18"/>
            <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
            <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
            <line x1="10" y1="11" x2="10" y2="17"/>
            <line x1="14" y1="11" x2="14" y2="17"/>
          </svg>
        </div>
        <h3 class="confirm-title">Delete Book?</h3>
        <p class="confirm-message">Are you sure you want to delete "<span id="delete-book-title"></span>"? This action cannot be undone.</p>
        <div class="confirm-actions">
          <button class="btn btn-secondary" onclick="closeDeleteModal()">Cancel</button>
          <button class="btn btn-danger" onclick="confirmDelete()">Delete</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toast-container"></div>

  <script src="../assets/js/admin_script.js"></script>
</body>
</html>
